<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Cadastro Nova Pessoa</title>
	<style type="text/css">
        .ui-outputlabel-rfi {
            display: none;
        }
    </style>
</h:head>

<h:body>
  
    <h:form id="formCadastro">
    	<p:messages id="messages" showDetail="true" closable="true"><p:autoUpdate/></p:messages>
    
   <p:panel header="Cadastro de Nova Pessoa">
        <p:panelGrid columns="2" >

            <p:outputLabel for="nome">Nome</p:outputLabel>
            <p:inputText id="nome" value="#{pessoaBean.pessoa.nome}" required="true" requiredMessage="O nome é obrigatório!"/>
            
            <p:outputLabel for="sobrenome">Sobrenome</p:outputLabel>
            <p:inputText id="sobrenome" value="#{pessoaBean.pessoa.sobrenome}" required="true" requiredMessage="O sobrenome é obrigatório!"/>
            
            <p:outputLabel>Sexo</p:outputLabel>
        	<p:selectOneRadio id="sexo" value="#{pessoaBean.pessoa.sexo}" layout="lineDirection" required="true" requiredMessage="O sexo é obrigatório!">
        		<f:selectItem itemLabel="Feminino" itemValue="F"/>
            	<f:selectItem itemLabel="Masculino" itemValue="M"/>
            </p:selectOneRadio>

            <p:outputLabel for="nascimento">Nascimento</p:outputLabel>
            <p:calendar id="nascimento" value="#{pessoaBean.pessoa.dataNascimento}"
            required="true" requiredMessage="O nascimento é obrigatório!"
            pattern="dd/MM/yyyy" mask="true"/>
            
            <p:outputLabel for="cep">CEP</p:outputLabel>
            <p:inputMask id="cep" value="#{pessoaBean.pessoa.cep}" required="true" requiredMessage="O cep é obrigatório!" mask="99999-999">
            	<p:ajax event="blur" listener="#{pessoaBean.buscarCep}" update="endereco messages" process="@this"></p:ajax>
            </p:inputMask>
            
            
            <p:outputLabel for="endereco" >Endereço</p:outputLabel>
            <p:inputText id="endereco" placeholder="Rua, bairro, cidade" value="#{pessoaBean.pessoa.endereco}"  required="true" requiredMessage="O endereco é obrigatório!"/>
            
            <p:commandButton value="Salvar" action="#{pessoaBean.salvar}" update="@form"/>
       		<p:commandButton value="Cancelar" action="#{pessoaBean.cancelar}" process="@this" update="@form" immediate="true"/>

        </p:panelGrid>
	</p:panel><hr/>
        
       
    	<p:dataTable id="tabelaPessoas" var="pessoa" value="#{pessoaBean.pessoas}" emptyMessage="Nenhum registro encontrado.">
        
        	<p:column headerText="Nome">
            <h:outputText value="#{pessoa.nome}" />
        	</p:column>

        	<p:column headerText="Sobrenome">
            	<h:outputText value="#{pessoa.sobrenome}" />
        	</p:column>

        	<p:column headerText="Sexo">
            	<h:outputText value="#{pessoa.sexo}" />
        	</p:column>

        	<p:column headerText="Nascimento">
            	<h:outputText value="#{pessoa.dataNascimento}">
                	<f:convertDateTime pattern="dd/MM/yyyy" />
            	</h:outputText>
        	</p:column>

        	<p:column headerText="Idade">
            	<h:outputText value="#{pessoa.idade}" />
        	</p:column>
        	
        	<p:column headerText="Endereço">
            	<h:outputText value="#{pessoa.endereco}" />
        	</p:column>
        	        
    	</p:dataTable>
	</h:form>
    
     
</h:body>
</html>

